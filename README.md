# Team AMW

This is a Next.js homepage for the Team AMW (Americas Most Wanted) community, generated by Firebase Studio.

It showcases live streamers, events, and media from the community.

## Getting Started

First, run the development server:

```bash
npm run dev
```

Open [http://localhost:9002](http://localhost:9002) with your browser to see the result.

You can start editing the page by modifying `src/app/page.tsx`. The page auto-updates as you edit the file.

## Managing Content

This site's content is managed through simple JSON files located in the `src/data/` directory. To update the site, edit the relevant file and commit the changes to your repository.

# Team AMW

A Next.js homepage for the Team AMW ("Americas Most Wanted") community. The site showcases live streamers, scheduled and past events, and media for the community. It includes a small admin UI and server actions to manage content.

This README highlights where important code lives, how to run the app locally, and how to manage seeded content.

## Quick links
- App entry: `src/app/page.tsx`
- Root layout: `src/app/layout.tsx`
- Admin UI: `src/app/admin/page-content.tsx`
- DB logic & initialization: `src/lib/db.ts` (see `initializeDb`)
- Firebase Admin SDK: `src/lib/firebase-admin.ts`
- Client Firebase config: `src/lib/firebase.ts`
- Toaster + hook: `src/components/ui/toaster.tsx` and `src/hooks/use-toast.ts`
- Placeholder images: `src/lib/placeholder-images.ts`
- Important server actions: `src/app/actions/manage-events.ts`, `src/app/actions/manage-media.ts`, `src/app/actions/manage-streamers.ts`

## Getting started

1. Install dependencies:

```bash
npm install
```

2. Copy environment variables (create a `.env` based on your environment):

```bash
copy .env.example .env
```

Open `.env` in your editor and fill in Firebase credentials and any platform keys used by the project. See `src/lib/firebase-admin.ts` and `src/lib/firebase.ts` for the expected variables.

3. Run the development server:

```bash
npm run dev
```

By default this project historically used port 9002 in dev previews; check the `npm run dev` output for the port if different. Open the URL printed by the dev server in your browser.

## Project structure (high level)

- `src/app` — Next.js app routes and server components
  - `src/app/page.tsx` — Home page
  - `src/app/layout.tsx` — Global layout (Toaster is mounted here)
  - `src/app/admin` — Admin pages and UIs
- `src/components` — Shared UI components and primitives (toast, dialog, cards, inputs, etc.)
- `src/lib` — Server utilities and data layer (DB, Firebase integration, utilities)
- `src/data` — JSON seed data used for initial DB population (events, streams, media, config)

## Managing content

On first run the app may initialize `amwhub.db` from the JSON files in `src/data/`. Edit the JSON files to update seeded content before the first run, or use the Admin UI to make changes at runtime.

Key data files:
- `src/data/config.json` — site settings (e.g., `discordInviteUrl`)
- `src/data/streams.json` — streamer entries (id, name, platform, avatar id, isLive, title, featured, etc.)
- `src/data/events.json` — events (id, title, start/end ISO, status, details, participants)
- `src/data/media.json` — media entries (id, type, title, url, thumbnail id, creator, date)

Database file: `amwhub.db` at the repo root. See `src/lib/db.ts` for migration and initialization code.

## Firebase

- Server (admin) setup: `src/lib/firebase-admin.ts` — used for server-side auth and admin operations.
- Client setup: `src/lib/firebase.ts` — client-side Firebase initialization.

Make sure to provide the Firebase service account or environment variables as shown in `.env.example`. The admin initializer handles escaped newlines in private keys.

## Developer notes

- Toasts: `Toaster` is mounted in the global layout and the `useToast` hook provides a small API for messages.
- UI primitives live under `src/components/ui/` and are reusable across pages.
- Remote image domains are configured in `next.config.ts`.

## AI helpers (dev)

There are a couple of small developer tools under `src/ai/` used for local generation and experiments (`src/ai/genkit.ts`, `src/ai/dev.ts`). They are optional and not required to run the app.

## Contributing

- Keep TypeScript types clean and run lint/type checks before opening PRs when possible.
- Update `src/data/*` to modify seeded content or use the Admin UI to change data at runtime.

## License

See repository root for license details.

## Running with Docker (local development)

The repository includes a `Dockerfile` for running the app in-place using a volume mount for live edits.

Build the image (from the repo root):

```bash
docker build -t amwhub-dev .
```

Run the container and mount the repo so edits are immediately visible. Map the container port 5235 to a host port of your choice (the project uses 5235 by default):

```bash
docker run --rm -it -p 5235:5235 -v "${PWD}:/app" -v "${PWD}/node_modules:/app/node_modules" -e NODE_ENV=development amwhub-dev
```

Notes:
- The container installs native build tools to support `better-sqlite3`.
- By default `amwhub.db` is ignored in the image. If you want the container to use the host DB file, bind-mount `amwhub.db` into the container (e.g. `-v "${PWD}/amwhub.db:/app/amwhub.db"`).
- If your development machine uses Windows `cmd.exe`, replace `${PWD}` with `%cd%` in the `docker run` command or use PowerShell-style variables when appropriate.

Using a `.env` file

You can forward environment variables from a `.env` file into the container in two ways:

- With `docker run`:

```bash
docker run --rm -it --env-file .env -p 5235:5235 -v "${PWD}:/app" -v "${PWD}/node_modules:/app/node_modules" amwhub-dev
```

- With `docker compose` (recommended for convenience). A `docker-compose.yml` is included and already references `.env` with `env_file`:

```bash
docker compose up --build
```

On Windows `cmd.exe`, use `%cd%` in place of `${PWD}` for the run command, or run the compose commands from PowerShell or WSL where `${PWD}` works as expected.

